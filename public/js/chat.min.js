/* 2015-05-16 */ var chatApp=angular.module("chatApp",["ngRoute"]);chatApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/name.html"}).when("/chat",{templateUrl:"partials/chat.html"}).otherwise({redirectTo:"/name.html"})}]),chatApp.factory("socket",function(a){var b=io.connect();return{on:function(c,d){b.on(c,function(){var c=arguments;a.$apply(function(){d.apply(b,c)})})},emit:function(c,d,e){b.emit(c,d,function(){var c=arguments;a.$apply(function(){e&&e.apply(b,c)})})}}}),chatApp.controller("chatCtrl",function(a,b){a.chatList=[],a.sendMessage=function(){console.log(a.text),b.emit("send message",a.text),a.text=""},b.on("send message",function(b){a.chatList.push(b)})}),chatApp.controller("nameCtrl",function(a,b,c){a.startChat=function(){console.log(a.name),c.emit("init",a.name),b.path("/chat")}});